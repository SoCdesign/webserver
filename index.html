<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
<title>Control Panel</title>
<script src="js/jquery-1.10.2.js"></script>	
<script src="js/jquery-ui-1.10.4.custom.min.js"></script>	
<script src="js/jquery.knob.js"></script>	
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" href="css/start/jquery-ui-1.10.4.custom.min.css">
<script type="text/javascript">
 $(function() {
    // setup L master volume

    $( "#master_L" ).slider({
	value: 20,
	orientation: "horizontal",
	range: "min",
	animate: true,
	stop: function(event, ui) {
		if($("#lock").prop('checked')) {
				$("#master_R").slider("value", $("#master_L").slider("value"));
			}
	},
	change: function(event, ui) {
		$.get("cgi-bin/getcmd.py?sudo amixer -D default set Master " + $("#master_L").slider("value") + "%");
		$("#masterdebug_L").append($("#master_L").slider("value")+" ")
	}

    });

    $( "#master_R" ).slider({
	value: 20,
	orientation: "horizontal",
	range: "min",
	animate: true,
	stop: function(event, ui) {
		if($("#lock").prop('checked')) {
				$("#master_L").slider("value", $("#master_R").slider("value"));
			}
	},
	change: function(event, ui) {
		$.get("cgi-bin/getcmd.py?sudo amixer -D default set Master " + $("#master_R").slider("value") + "%");
		$("#masterdebug_R").append($("#master_R").slider("value")+" ")
	}
    });

	// setup balance
    $( "#balance" ).slider({
	value: 50,
	orientation: "horizontal",
	range: "min",
	animate: true,
	change: function(event, ui) {
		$.get("cgi-bin/getcmd.py?sudo amixer -D default set Master " + $("#balance").slider("value") + "%");
		$("#balancedebug").append($("#balance").slider("value")+" ");
	}
    });
	
    // setup graphic EQ
    $( "#eq1" ).slider({
	value: 88,
	orientation: "vertical",
	range: "min",
	animate: true,
	change: function(event, ui) {
		$.get("cgi-bin/getcmd.py?sudo amixer -D default set Master " + $("#eq1").slider("value") + "%");
		$("#eqdebug_L").append($("#eq1").slider("value")+" ")
	}
    });
    $( "#eq2" ).slider({
	value: 77,
	orientation: "vertical",
	range: "min",
	animate: true,
	change: function(event, ui) {
		$.get("cgi-bin/getcmd.py?sudo amixer -D default set Master " + $("#eq2").slider("value") + "%");
		$("#eqdebug_M").append($("#eq2").slider("value")+" ")
	}
    });
    $( "#eq3" ).slider({
	value: 55,
	orientation: "vertical",
	range: "min",
	animate: true,
	change: function(event, ui) {
		$.get("cgi-bin/getcmd.py?sudo amixer -D default set Master " + $("#eq3").slider("value") + "%");
		$("#eqdebug_H").append($("#eq3").slider("value")+" ")
	}
    });


	// setup gain
	$( "#gain" ).slider({
	value: 1,
	min: 0.1,
	max: 5,
	step: 0.1,
	orientation: "vertical",
	range: "min",
	animate: true,
	change: function(event, ui) {
		$.get("cgi-bin/getcmd.py?sudo amixer -D default set Master " + $("#gain").slider("value") + "%");
		$("#eqdebug_G").append($("#gain").slider("value")+" ")
	}
    });

  });
</script>
</head>
<body>
<div id="wrapper">
		<!-- Channel selection -->
		<p class="ui-state-default ui-corner-all ui-helper-clearfix" style="padding:4px;">
		  <span class="ui-icon ui-icon-bullet" style="float:left; margin:-2px 5px 0 0;"></span>
		  Channel selection
		</p>
		<div id="channel_knob">
			<input class="cs_knob" value="1" data-skin="tron" > 
		</div>

		<!-- Master volume -->
		<p class="ui-state-default ui-corner-all ui-helper-clearfix" style="padding:4px;">
		  <span class="ui-icon ui-icon-volume-on" style="float:left; margin:-2px 5px 0 0;"></span>
		  Master volume
		</p>
		<span>test</span>
		<p>test</p>
		<div id="lock_wrapper">
			<input id="lock" type="checkbox" checked/>
			<span style="">Lock</span>
		</div>
		<div id="masters">
		<p>Left</p>
		<div id="master_L" class="hslider"></div>
		<p>Right</p>
		<div id="master_R" class="hslider"></div>

		<!-- Balance -->
		<p class="ui-state-default ui-corner-all ui-helper-clearfix" style="padding:4px;">
		  <span class="ui-icon ui-icon-arrow-2-e-w" style="float:left; margin:-2px 5px 0 0;"></span>
		  Balance
		</p>
		
		<div id="balance_wrapper">
			<div id="lb_label">L</div>
			<div id="balance" class="hslider"></div>
			<div id="rb_label">R</div>
			<div class="clear"></div>
		</div>
		
		<!-- Equalizer -->
		<p class="ui-state-default ui-corner-all" style="padding:4px">
		  <span class="ui-icon ui-icon-signal" style="float:left; margin:-2px 5px 0 0;"></span>
		  Equalizer
		</p>

		<div id="eq">
			<span id="eq1"></span>
			<span id="eq2"></span>
			<span id="eq3"></span>
		</div>

		<div id="gainn">
			<span id="gain"></span>
			<div class="clear"></div>
		</div>
		 
		<div id="eq_labels">
			<span>Low</span>
			<span>Mid</span>
			<span>High</span>
		</div>
		<div id="gain_labels">
			<span>Gain</span>
		</div>
	<div class="clear"></div>
	<div>
	  <p id="debug">Channel:</p>
	  <p id="balancedebug">Balance:	</p>
	  <p id="masterdebug_L">Master_L:</p>
	  <p id="masterdebug_R">Master_R:</p>
	  <p id="eqdebug_L">Low:</p>
	  <p id="eqdebug_M">Mid:</p>
	  <p id="eqdebug_H">High:</p>
	  <p id="eqdebug_G">Gain:</p>
	</div>
</div>
<script>
$(".cs_knob").knob({
min : 1, 
max : 4, 
step : 1, 
angleOffset : -90, 
angleArc : 180, 
stopper : true, 
readOnly : false, 
cursor : 20,  
lineCap : 'butt', 
thickness : '0.22', 
width : 100, 
displayInput : true, 
displayPrevious : true, 
fgColor : '#0078ae', 
inputColor : '#0078ae', 
font : 'Arial', 
fontWeight : 'bold', 
bgColor : '#EEEEEE', 
draw : function () {
if(this.$.data('skin') == 'tron') {
var a = this.angle(this.cv)  // Angle
, sa = this.startAngle          // Previous start angle
, sat = this.startAngle         // Start angle
, ea                            // Previous end angle
, eat = sat + a                 // End angle
, r = 1;
this.g.lineWidth = this.lineWidth;
this.o.cursor
&& (sat = eat - 0.3)
&& (eat = eat + 0.3);
if (this.o.displayPrevious) {
ea = this.startAngle + this.angle(this.v);
this.o.cursor
&& (sa = ea - 0.3)
&& (ea = ea + 0.3);
this.g.beginPath();
this.g.strokeStyle = this.pColor;
this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, sa, ea, false);
this.g.stroke();
}
this.g.beginPath();
this.g.strokeStyle = r ? this.o.fgColor : this.fgColor ;
this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, sat, eat, false);
this.g.stroke();
this.g.lineWidth = 2;
this.g.beginPath();
this.g.strokeStyle = this.o.fgColor;
this.g.arc( this.xy, this.xy, this.radius - this.lineWidth + 1 + this.lineWidth * 2 / 3, 0, 2 * Math.PI, false);
this.g.stroke();
return false;
}},
change : function(v) {
	$("#debug").append(v);
}
});
</script>
</body>
</html>
